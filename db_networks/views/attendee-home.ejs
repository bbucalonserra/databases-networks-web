<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Available Events - UoL</title>
    <link rel="stylesheet" href="/main.css">
</head>
<body>
    <header>
        <h1>Upcoming Events</h1>
        <a href="/">← Return to Home</a>
    </header>

    <section style="background: white; padding: 20px; border: 1px solid #bfc1c3; margin-bottom: 20px;">
        <form action="/attendee" method="GET" style="box-shadow: none; padding: 0; border: none; display: flex; gap: 10px; align-items: flex-end;">
            <div style="flex-grow: 1;">
                <label for="search" style="margin-top: 0;">Search Events by Title:</label>
                <input type="text" name="search" id="search" placeholder="e.g. Graduation" value="<%= search %>">
            </div>
            <button type="submit" style="margin-top: 0; padding: 10px;">Search</button>
        </form>
    </section>

    <main>
        <% if (events.length > 0) { %>
            <ul>
                <% events.forEach(function(event) { %>
                    <li>
                        <h3><%= event.title %></h3>
                        <p><strong>Date:</strong> <%= event.event_date %></p>
                        <p><strong>Price from:</strong> £<%= event.full_price_cost %></p>
                        <a href="/attendee/event/<%= event.id %>">View & Book</a>
                    </li>
                <% }); %>
            </ul>
        <% } else { %>
            <p>No events found for "<%= search %>".</p>
            <a href="/attendee">Show all events</a>
        <% } %>
    </main>
</body>
</html>